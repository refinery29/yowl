#!/usr/bin/env ruby
$:.unshift File.join(File.dirname(__FILE__), "..", "lib")
require 'rubygems'
require 'getoptlong'
require 'dowl'
require 'erb'
require 'optparse'

PROGRAM = File::basename $0

options = {}
optparse = OptionParser.new do |opts|
   #
   # Set a banner, displayed at the top of the help screen.
   #
   opts.banner = "Usage: " + PROGRAM + " [<options>] [<template>]"

   options[:ontology] = nil
   opts.on( '-i', '--ontology FILE', 'Read FILE' ) do |ontology|
     options[:ontology] = ontology
   end
 
   options[:htmldir] = nil
   opts.on( '-o', '--htmldir DIR', 'Write HTML output to DIR' ) do |dir|
     options[:htmldir] = dir
   end

   options[:template] = nil
   opts.on( '-o', '--template FILE', 'Use ERB template FILE' ) do |template|
     options[:template] = template
   end
 
   # This displays the help screen, all programs are
   # assumed to have this option.
   opts.on( '-h', '--help', 'Display this screen' ) do
     puts opts
     exit
   end
 end

schema = DOWL::Schema.create_from_file(options[:ontology])
DOWL::Generator.new(schema, options[:template], options[:htmldir]).run()
